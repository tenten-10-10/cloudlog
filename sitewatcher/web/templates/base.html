<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or "SiteWatcher" }}</title>
    <link rel="stylesheet" href="/static/style.css" />
    <meta name="color-scheme" content="dark" />
  </head>
  <body>
    <header class="topbar">
      <div class="container topbar__inner">
        <div class="row">
          <a class="brand" href="/">
            <span class="brand__mark" aria-hidden="true"></span>
            <span>SiteWatcher</span>
          </a>
          <nav class="navlinks" aria-label="Primary">
            {% if auth_disabled or auth_user %}
              <a href="/">ダッシュボード</a>
              <a href="/targets/new">＋監視を追加</a>
              <a href="/settings">設定</a>
            {% endif %}
          </nav>
        </div>
        <div class="row">
          {% if auth_disabled or auth_user %}
            <form method="post" action="/run-now">
              <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
              <button class="btn btn--success" type="submit">今すぐ実行</button>
            </form>
          {% endif %}

          {% if auth_user %}
            <span class="badge">ユーザー: <span class="mono">{{ auth_user }}</span></span>
            <form method="post" action="/logout">
              <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
              <button class="btn btn--ghost btn--sm" type="submit">ログアウト</button>
            </form>
          {% elif not auth_disabled %}
            {% if registration_allowed %}
              <a class="btn btn--ghost btn--sm" href="/register">登録</a>
            {% endif %}
            <a class="btn btn--primary btn--sm" href="/login">ログイン</a>
          {% endif %}
        </div>
      </div>
    </header>
    <main class="main">
      <div class="container">{% block content %}{% endblock %}</div>
    </main>

    <script src="/static/app.js" defer></script>
  </body>
</html>
